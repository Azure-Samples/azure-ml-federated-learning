$schema: https://azuremlschemas.azureedge.net/latest/commandJob.schema.json
type: command

description: "Run a job distributed accross multiple computes (for FL in-sync)."
display_name: Multi-Compute Distributed Job (FL experimental)

inputs:
  # data loading
  config:
    type: uri_file
    path: ./projects/nvflare_sample/config.yaml
  source:
    type: uri_folder
    path: ./projects/nvflare_sample/workspace/example_project/

code: ./src/

command: >-
  python launcher.py 
  --config ${{inputs.config}} 
  --source ${{inputs.source}}

environment:
  build:
    path: ./environments/mcd_runtime/context/

compute: azureml:cpu-orchestrator
