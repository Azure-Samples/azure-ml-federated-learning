$schema: https://azuremlschemas.azureedge.net/latest/commandJob.schema.json

command: >
  python run.py 
  --local_data_folder ${{inputs.local_data_folder}} 
  --destination_folder ${{outputs.destination_folder}} 
  --enable_output_encryption ${{inputs.enable_encryption_at_rest}} 
  --key_name ${{inputs.encryption_key_name}} 
  --keyvault ${{inputs.encryption_kv_url}}

inputs:
  local_data_folder:
    type: uri_folder
    path: /path/to/local/data/folder # replace '/path/to/local/data/folder' by the actual path to the folder whose contents you want to upload
  
  # to enable encryption of the outputs using your own keys
  enable_encryption_at_rest: false
  encryption_kv_url: "kv-fldemo" # name of the keyvault
  encryption_key_name: "io_public_key" # name of the secret containing your encryption public key

outputs:
  destination_folder:
    type: uri_folder
    mode: upload
    path: azureml://datastores/<your-silo-datastore-name>/paths/<your-custom-local-path>/ # replace '<your-silo-datastore-name>' by the actual datastore name for your silo, and <your-custom-local-path> by the path you want to use in the silo storage account

environment: azureml:AzureML-sklearn-1.0-ubuntu20.04-py38-cpu@latest

compute: azureml:<your-silo-compute-name> # replace '<your-silo-compute-name>' by the actual compute name for your silo
