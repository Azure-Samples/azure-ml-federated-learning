$schema: https://azuremlschemas.azureedge.net/latest/commandComponent.schema.json
name: nvflare_client
version: 2.2.3-mod1
display_name: NVFlare server
type: command
description: Populates an NVFlare server
is_deterministic: true

inputs:
  server_config:
    type: uri_folder
  admin_config:
    type: uri_folder
  app_dir:
    type: uri_folder
  server_name:
    type: string
  expected_clients:
    type: integer
  start:
    type: uri_file
  wait_for_clients_timeout:
    type: integer
    default: 600

outputs:
  job_artefacts:
    type: uri_folder

code: "."

command: >-
  python run.py 
  --server_config ${{inputs.server_config}} 
  --admin_config ${{inputs.admin_config}} 
  --app_dir ${{inputs.app_dir}} 
  --server_name ${{inputs.server_name}} 
  --expected_clients ${{inputs.expected_clients}} 
  --output_dir ${{outputs.job_artefacts}} 
  --wait_for_clients_timeout ${{inputs.wait_for_clients_timeout}}

environment: 
  build:
    path: ../nvflare_run_env/context/
