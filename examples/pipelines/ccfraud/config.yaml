# example yaml config

# using this to store references to Azure ML
aml:
  # subscription_id: "<SUBSCRIPTION_ID>"
  # resource_group_name: "<RESOURCE_GROUP>"
  # workspace_name: "<AML_WORKSPACE_NAME>"

# federated learning parameters
federated_learning:
  orchestrator:
    compute: orchestrator-01
    datastore: datastore_orchestrator

  silos:
    - name: silo0
      computes: 
      - silo0-01 # name of the compute for silo X
      datastore: datastore_silo0
      training_data:
        type: uri_file
        mode: 'download'
        path: azureml://datastores/datastore_silo0/paths/federated_learning/ccfraud/raw_train_data
      testing_data:
        type: uri_file
        mode: 'download'
        path: azureml://datastores/datastore_silo0/paths/federated_learning/ccfraud/raw_test_data

    - name: silo1
      computes: 
      - silo1-01 # we are repeating over the same config for silo 2
      datastore: datastore_silo1
      training_data:
        type: uri_file
        mode: 'download'
        path: azureml://datastores/datastore_silo1/paths/federated_learning/ccfraud/raw_train_data
      testing_data:
        type: uri_file
        mode: 'download'
        path: azureml://datastores/datastore_silo1/paths/federated_learning/ccfraud/raw_test_data

    - name: silo2
      computes: 
      - silo2-01 # we are repeating over the same config for silo 3
      datastore: datastore_silo2
      training_data:
        type: uri_file
        mode: 'download'
        path: azureml://datastores/datastore_silo2/paths/federated_learning/ccfraud/raw_train_data
      testing_data:
        type: uri_file
        mode: 'download'
        path: azureml://datastores/datastore_silo2/paths/federated_learning/ccfraud/raw_test_data

# training parameters
training_parameters:
  num_of_iterations: 3
  epochs: 3
  lr: 1e-3
  batch_size: 500
  # Property model_name defines model to be used for training and 
  # must be one of the models defined in the traininsilo/model.py 
  # file for the CCFRAUD component. Options include: 
  # SimpleLinear, SimpleLSTM, SimpleVAE
  model_name: SimpleLinear

  # Differential privacy
  dp: true
  dp_noise_multiplier: 1.0
  dp_max_grad_norm: 1.0