
$schema: https://azuremlschemas.azureedge.net/latest/commandComponent.schema.json
name: aggregate_model_weights
version: 0.1.0
display_name: Aggregate Model Weights (from all silos)
type: command
description: Mock component for aggreating model weights.
is_deterministic: true

inputs:
  model_silo_1:
    type: uri_folder
    description: the model weights mounted from silo 01
    optional: false
  model_silo_2:
    type: uri_folder
    description: the model weights mounted from silo 02
    optional: true
  model_silo_3:
    type: uri_folder
    description: the model weights mounted from silo 03
    optional: true

outputs:
  aggregated_model:
    type: uri_folder
    description: the aggregated model, residing in the orchestrator compute.

command: >-
  python run.py --aggregated_model ${{outputs.aggregated_model}}
  --model_1 ${{inputs.model_silo_1}}
  [--model_2 ${{inputs.model_silo_2}}]
  [--model_3 ${{inputs.model_silo_3}}]

environment: azureml:AzureML-sklearn-0.24-ubuntu18.04-py37-cpu@latest
